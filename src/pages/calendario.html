<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Calendario Escolar 2025 - Universidad Politécnica de Baja California">
  <meta name="author" content="UPBC">
  
  <title>Calendario Escolar 2025 - Universidad Politécnica de Baja California</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/assets/css/fontawesome.css">
  
  <script type="module" crossorigin src="/assets/vendor-Bcn1fxYS.js"></script>
  <script type="module" crossorigin src="/assets/main-CKAy931l.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/main-CmxTnlPi.css">
</head>
<body>
  
  <!-- Navbar Container -->
  <div id="navbar-container"></div>

  <!-- Main Content -->
  <main>
    <section class="calendario-container">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="page-heading">
              <h2>Calendario Escolar 2025</h2>
              <p>Consulta las fechas importantes del ciclo escolar, periodos de inscripción, vacaciones y eventos académicos.</p>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-lg-12">
            <div class="calendar-controls">
              <a href="/assets/pdfs/UPBC_Calendario2025.pdf" download class="btn btn-purple">
                <i class="fa fa-download"></i> Descargar PDF
              </a>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-lg-12">
            <div class="pdf-container">
              <div id="pdf-viewer-container">
                <canvas id="pdf-renderer"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer Container -->
  <div id="footer-container"></div>

  <!-- PDF.js Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script>
    // Configuración de PDF.js
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
    
    let pdfDoc = null,
        pageNum = 1,
        pageRendering = false,
        pageNumPending = null,
        scale = 1.5,
        canvas = document.getElementById('pdf-renderer'),
        ctx = canvas.getContext('2d');
    
    // Cargar el PDF
    function loadPDF(url) {
      pdfjsLib.getDocument(url).promise.then(function(pdf) {
        pdfDoc = pdf;
        
        // Renderizar la primera página
        renderPage(pageNum);
      }).catch(function(error) {
        console.error('Error al cargar el PDF:', error);
        const container = document.getElementById('pdf-viewer-container');
        container.innerHTML = '<div class="alert alert-danger" style="padding: 20px; background-color: #f8d7da; color: #721c24; border-radius: 5px;">Error al cargar el PDF. Por favor, <a href="/assets/pdfs/UPBC_Calendario2025.pdf" style="color: #602b82; font-weight: bold;">descargue el archivo aquí</a>.</div>';
      });
    }
    
    // Renderizar la página especificada
    function renderPage(num) {
      pageRendering = true;
      
      // Obtener la página
      pdfDoc.getPage(num).then(function(page) {
        const viewport = page.getViewport({ scale: scale });
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        
        // Renderizar PDF en el canvas
        const renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };
        
        const renderTask = page.render(renderContext);
        
        // Esperar a que termine el renderizado
        renderTask.promise.then(function() {
          pageRendering = false;
          
          if (pageNumPending !== null) {
            renderPage(pageNumPending);
            pageNumPending = null;
          }
        });
      });
    }
    
    // Poner en cola el renderizado de página
    function queueRenderPage(num) {
      if (pageRendering) {
        pageNumPending = num;
      } else {
        renderPage(num);
      }
    }
    
    // Cargar el PDF cuando la página esté lista
    document.addEventListener('DOMContentLoaded', function() {
      loadPDF('/assets/pdfs/UPBC_Calendario2025.pdf');
    });
  </script>

  <!-- Main Script -->

</body>
</html>
